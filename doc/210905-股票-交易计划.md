# 股票交易计划

## 前言

在股票交易中，如何让自己的投资策略不随市场的情绪而波动
唯一的办法，就是

1. 建立自己的投资计划
2. 并坚持投资纪律
3. 耐心等待

今天我们就如何构建投资计划，开始一段用python程序来代替人来做决策，
从而控制自己的手

## 投资计划函数


```python
import pandas as pd

# 自定义函数，针对单个标的的投资计划

def plan(name,price_init,rate_init,shares_init,data):
    df = pd.DataFrame(data=data)
    df['加仓批次'] = list(range(1,len(df)+1))
    df['名称'] = name
    df['价格'] = df['价格系数'] * price_init
    df['shares'] = ''
    df['money'] = ''    
    print(df)
    df.loc[df['加仓批次']==1, 'shares'] = shares_init
    print(df)
    df.loc[df['加仓批次']==1, 'money'] = df.loc[df['加仓批次']==1, '价格'] * df.loc[df['加仓批次']==1, 'shares']
    money_init = df.loc[df['加仓批次']==1, 'money'].values[0]  
    for i in range(len(df)-1):
        n = i+2   
        df.loc[df['加仓批次']==n, 'shares'] = round(money_init*df.loc[df['加仓批次']==n, '加仓比例']/\
                                                (rate_init * df.loc[df['加仓批次']==n, '价格']*100),0)*100
        df.loc[df['加仓批次']==n, 'money'] = df.loc[df['加仓批次']==n, '价格'] * df.loc[df['加仓批次']==n, 'shares']
    
    df['累计仓位'] = df['加仓比例'].cumsum()
    df['累计份额'] = df['shares'].cumsum()
    df['累计金额'] = df['money'].cumsum()
    df['成本'] = df['累计金额']/df['累计份额']
    df['下跌幅度'] = 1- df['价格系数']
    df['下跌幅度'] = df['下跌幅度'].apply(lambda x:f'下跌{int(round(x*100,0))}%')
    df.loc[df['加仓批次']==1, '下跌幅度'] = '首次'
    df = df[['名称','加仓批次', '下跌幅度', '价格系数','价格', '加仓比例', '累计仓位', 
             'shares', 'money','累计份额', '累计金额','成本']]
    return df

```


```python


```

## 中概互联


```python
# 标的名称
name = '中概互联-513050'

# 首次购入价格
price_init = 2.0

# 首次加仓比例
rate_init = 0.01

# 首次购入份额数量
shares_init = 2000

data = {
    '价格系数':[1,0.95,0.9,0.85,0.8,0.75,0.7,0.65],
    '加仓比例':[rate_init,0.02,0.03,0.04,0.05,0.05,0.05,0.05],
    }
df = plan(name,price_init,rate_init,shares_init,data)

format_dict = {'money': '￥{0:.0f}', 
               '累计金额': '￥{0:.0f}', 
               '价格': '{0:.3f}', 
               '成本': '{0:.3f}', 
               'shares': '{0:.0f}', 
               '累计份额': '{0:.0f}', 
               '价格系数': '{0:.0%}', 
               '加仓比例': '{0:.2%}', 
               '累计仓位': '{0:.2%}', 
                }
# print(name)
df.style.hide_index().format(format_dict)
```




<style type="text/css">
</style>
<table id="T_5d7c7_">
  <thead>
    <tr>
      <th class="col_heading level0 col0" >名称</th>
      <th class="col_heading level0 col1" >加仓批次</th>
      <th class="col_heading level0 col2" >下跌幅度</th>
      <th class="col_heading level0 col3" >价格系数</th>
      <th class="col_heading level0 col4" >价格</th>
      <th class="col_heading level0 col5" >加仓比例</th>
      <th class="col_heading level0 col6" >累计仓位</th>
      <th class="col_heading level0 col7" >shares</th>
      <th class="col_heading level0 col8" >money</th>
      <th class="col_heading level0 col9" >累计份额</th>
      <th class="col_heading level0 col10" >累计金额</th>
      <th class="col_heading level0 col11" >成本</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="T_5d7c7_row0_col0" class="data row0 col0" >中概互联-513050</td>
      <td id="T_5d7c7_row0_col1" class="data row0 col1" >1</td>
      <td id="T_5d7c7_row0_col2" class="data row0 col2" >首次</td>
      <td id="T_5d7c7_row0_col3" class="data row0 col3" >100%</td>
      <td id="T_5d7c7_row0_col4" class="data row0 col4" >2.000</td>
      <td id="T_5d7c7_row0_col5" class="data row0 col5" >1.00%</td>
      <td id="T_5d7c7_row0_col6" class="data row0 col6" >1.00%</td>
      <td id="T_5d7c7_row0_col7" class="data row0 col7" >2000</td>
      <td id="T_5d7c7_row0_col8" class="data row0 col8" >￥4000</td>
      <td id="T_5d7c7_row0_col9" class="data row0 col9" >2000</td>
      <td id="T_5d7c7_row0_col10" class="data row0 col10" >￥4000</td>
      <td id="T_5d7c7_row0_col11" class="data row0 col11" >2.000</td>
    </tr>
    <tr>
      <td id="T_5d7c7_row1_col0" class="data row1 col0" >中概互联-513050</td>
      <td id="T_5d7c7_row1_col1" class="data row1 col1" >2</td>
      <td id="T_5d7c7_row1_col2" class="data row1 col2" >下跌5%</td>
      <td id="T_5d7c7_row1_col3" class="data row1 col3" >95%</td>
      <td id="T_5d7c7_row1_col4" class="data row1 col4" >1.900</td>
      <td id="T_5d7c7_row1_col5" class="data row1 col5" >2.00%</td>
      <td id="T_5d7c7_row1_col6" class="data row1 col6" >3.00%</td>
      <td id="T_5d7c7_row1_col7" class="data row1 col7" >4200</td>
      <td id="T_5d7c7_row1_col8" class="data row1 col8" >￥7980</td>
      <td id="T_5d7c7_row1_col9" class="data row1 col9" >6200</td>
      <td id="T_5d7c7_row1_col10" class="data row1 col10" >￥11980</td>
      <td id="T_5d7c7_row1_col11" class="data row1 col11" >1.932</td>
    </tr>
    <tr>
      <td id="T_5d7c7_row2_col0" class="data row2 col0" >中概互联-513050</td>
      <td id="T_5d7c7_row2_col1" class="data row2 col1" >3</td>
      <td id="T_5d7c7_row2_col2" class="data row2 col2" >下跌10%</td>
      <td id="T_5d7c7_row2_col3" class="data row2 col3" >90%</td>
      <td id="T_5d7c7_row2_col4" class="data row2 col4" >1.800</td>
      <td id="T_5d7c7_row2_col5" class="data row2 col5" >3.00%</td>
      <td id="T_5d7c7_row2_col6" class="data row2 col6" >6.00%</td>
      <td id="T_5d7c7_row2_col7" class="data row2 col7" >6700</td>
      <td id="T_5d7c7_row2_col8" class="data row2 col8" >￥12060</td>
      <td id="T_5d7c7_row2_col9" class="data row2 col9" >12900</td>
      <td id="T_5d7c7_row2_col10" class="data row2 col10" >￥24040</td>
      <td id="T_5d7c7_row2_col11" class="data row2 col11" >1.864</td>
    </tr>
    <tr>
      <td id="T_5d7c7_row3_col0" class="data row3 col0" >中概互联-513050</td>
      <td id="T_5d7c7_row3_col1" class="data row3 col1" >4</td>
      <td id="T_5d7c7_row3_col2" class="data row3 col2" >下跌15%</td>
      <td id="T_5d7c7_row3_col3" class="data row3 col3" >85%</td>
      <td id="T_5d7c7_row3_col4" class="data row3 col4" >1.700</td>
      <td id="T_5d7c7_row3_col5" class="data row3 col5" >4.00%</td>
      <td id="T_5d7c7_row3_col6" class="data row3 col6" >10.00%</td>
      <td id="T_5d7c7_row3_col7" class="data row3 col7" >9400</td>
      <td id="T_5d7c7_row3_col8" class="data row3 col8" >￥15980</td>
      <td id="T_5d7c7_row3_col9" class="data row3 col9" >22300</td>
      <td id="T_5d7c7_row3_col10" class="data row3 col10" >￥40020</td>
      <td id="T_5d7c7_row3_col11" class="data row3 col11" >1.795</td>
    </tr>
    <tr>
      <td id="T_5d7c7_row4_col0" class="data row4 col0" >中概互联-513050</td>
      <td id="T_5d7c7_row4_col1" class="data row4 col1" >5</td>
      <td id="T_5d7c7_row4_col2" class="data row4 col2" >下跌20%</td>
      <td id="T_5d7c7_row4_col3" class="data row4 col3" >80%</td>
      <td id="T_5d7c7_row4_col4" class="data row4 col4" >1.600</td>
      <td id="T_5d7c7_row4_col5" class="data row4 col5" >5.00%</td>
      <td id="T_5d7c7_row4_col6" class="data row4 col6" >15.00%</td>
      <td id="T_5d7c7_row4_col7" class="data row4 col7" >12500</td>
      <td id="T_5d7c7_row4_col8" class="data row4 col8" >￥20000</td>
      <td id="T_5d7c7_row4_col9" class="data row4 col9" >34800</td>
      <td id="T_5d7c7_row4_col10" class="data row4 col10" >￥60020</td>
      <td id="T_5d7c7_row4_col11" class="data row4 col11" >1.725</td>
    </tr>
    <tr>
      <td id="T_5d7c7_row5_col0" class="data row5 col0" >中概互联-513050</td>
      <td id="T_5d7c7_row5_col1" class="data row5 col1" >6</td>
      <td id="T_5d7c7_row5_col2" class="data row5 col2" >下跌25%</td>
      <td id="T_5d7c7_row5_col3" class="data row5 col3" >75%</td>
      <td id="T_5d7c7_row5_col4" class="data row5 col4" >1.500</td>
      <td id="T_5d7c7_row5_col5" class="data row5 col5" >5.00%</td>
      <td id="T_5d7c7_row5_col6" class="data row5 col6" >20.00%</td>
      <td id="T_5d7c7_row5_col7" class="data row5 col7" >13300</td>
      <td id="T_5d7c7_row5_col8" class="data row5 col8" >￥19950</td>
      <td id="T_5d7c7_row5_col9" class="data row5 col9" >48100</td>
      <td id="T_5d7c7_row5_col10" class="data row5 col10" >￥79970</td>
      <td id="T_5d7c7_row5_col11" class="data row5 col11" >1.663</td>
    </tr>
    <tr>
      <td id="T_5d7c7_row6_col0" class="data row6 col0" >中概互联-513050</td>
      <td id="T_5d7c7_row6_col1" class="data row6 col1" >7</td>
      <td id="T_5d7c7_row6_col2" class="data row6 col2" >下跌30%</td>
      <td id="T_5d7c7_row6_col3" class="data row6 col3" >70%</td>
      <td id="T_5d7c7_row6_col4" class="data row6 col4" >1.400</td>
      <td id="T_5d7c7_row6_col5" class="data row6 col5" >5.00%</td>
      <td id="T_5d7c7_row6_col6" class="data row6 col6" >25.00%</td>
      <td id="T_5d7c7_row6_col7" class="data row6 col7" >14300</td>
      <td id="T_5d7c7_row6_col8" class="data row6 col8" >￥20020</td>
      <td id="T_5d7c7_row6_col9" class="data row6 col9" >62400</td>
      <td id="T_5d7c7_row6_col10" class="data row6 col10" >￥99990</td>
      <td id="T_5d7c7_row6_col11" class="data row6 col11" >1.602</td>
    </tr>
    <tr>
      <td id="T_5d7c7_row7_col0" class="data row7 col0" >中概互联-513050</td>
      <td id="T_5d7c7_row7_col1" class="data row7 col1" >8</td>
      <td id="T_5d7c7_row7_col2" class="data row7 col2" >下跌35%</td>
      <td id="T_5d7c7_row7_col3" class="data row7 col3" >65%</td>
      <td id="T_5d7c7_row7_col4" class="data row7 col4" >1.300</td>
      <td id="T_5d7c7_row7_col5" class="data row7 col5" >5.00%</td>
      <td id="T_5d7c7_row7_col6" class="data row7 col6" >30.00%</td>
      <td id="T_5d7c7_row7_col7" class="data row7 col7" >15400</td>
      <td id="T_5d7c7_row7_col8" class="data row7 col8" >￥20020</td>
      <td id="T_5d7c7_row7_col9" class="data row7 col9" >77800</td>
      <td id="T_5d7c7_row7_col10" class="data row7 col10" >￥120010</td>
      <td id="T_5d7c7_row7_col11" class="data row7 col11" >1.543</td>
    </tr>
  </tbody>
</table>




## 万科


```python
# 标的名称
name = '万科'

# 首次购入价格
price_init = 22

# 首次加仓比例
rate_init = 0.01

# 首次购入份额数量
shares_init = 300

data = {
    '价格系数':[1,0.95,0.9,0.85,0.8,0.75,0.7,0.65],
    '加仓比例':[rate_init,0.02,0.03,0.04,0.05,0.05,0.05,0.05],
    }
df = plan(name,price_init,rate_init,shares_init,data)

format_dict = {'money': '￥{0:.0f}', 
               '累计金额': '￥{0:.0f}', 
               '价格': '{0:.3f}', 
               '成本': '{0:.3f}', 
               'shares': '{0:.0f}', 
               '累计份额': '{0:.0f}', 
               '价格系数': '{0:.0%}', 
               '加仓比例': '{0:.2%}', 
               '累计仓位': '{0:.2%}', 
                }
df.style.hide_index().format(format_dict)
```

       价格系数  加仓比例  加仓批次  名称    价格 shares money
    0  1.00  0.01     1  万科  22.0             
    1  0.95  0.02     2  万科  20.9             
    2  0.90  0.03     3  万科  19.8             
    3  0.85  0.04     4  万科  18.7             
    4  0.80  0.05     5  万科  17.6             
    5  0.75  0.05     6  万科  16.5             
    6  0.70  0.05     7  万科  15.4             
    7  0.65  0.05     8  万科  14.3             
       价格系数  加仓比例  加仓批次  名称    价格 shares money
    0  1.00  0.01     1  万科  22.0    300      
    1  0.95  0.02     2  万科  20.9             
    2  0.90  0.03     3  万科  19.8             
    3  0.85  0.04     4  万科  18.7             
    4  0.80  0.05     5  万科  17.6             
    5  0.75  0.05     6  万科  16.5             
    6  0.70  0.05     7  万科  15.4             
    7  0.65  0.05     8  万科  14.3             





<style type="text/css">
</style>
<table id="T_da302_">
  <thead>
    <tr>
      <th class="col_heading level0 col0" >名称</th>
      <th class="col_heading level0 col1" >加仓批次</th>
      <th class="col_heading level0 col2" >下跌幅度</th>
      <th class="col_heading level0 col3" >价格系数</th>
      <th class="col_heading level0 col4" >价格</th>
      <th class="col_heading level0 col5" >加仓比例</th>
      <th class="col_heading level0 col6" >累计仓位</th>
      <th class="col_heading level0 col7" >shares</th>
      <th class="col_heading level0 col8" >money</th>
      <th class="col_heading level0 col9" >累计份额</th>
      <th class="col_heading level0 col10" >累计金额</th>
      <th class="col_heading level0 col11" >成本</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="T_da302_row0_col0" class="data row0 col0" >万科</td>
      <td id="T_da302_row0_col1" class="data row0 col1" >1</td>
      <td id="T_da302_row0_col2" class="data row0 col2" >首次</td>
      <td id="T_da302_row0_col3" class="data row0 col3" >100%</td>
      <td id="T_da302_row0_col4" class="data row0 col4" >22.000</td>
      <td id="T_da302_row0_col5" class="data row0 col5" >1.00%</td>
      <td id="T_da302_row0_col6" class="data row0 col6" >1.00%</td>
      <td id="T_da302_row0_col7" class="data row0 col7" >300</td>
      <td id="T_da302_row0_col8" class="data row0 col8" >￥6600</td>
      <td id="T_da302_row0_col9" class="data row0 col9" >300</td>
      <td id="T_da302_row0_col10" class="data row0 col10" >￥6600</td>
      <td id="T_da302_row0_col11" class="data row0 col11" >22.000</td>
    </tr>
    <tr>
      <td id="T_da302_row1_col0" class="data row1 col0" >万科</td>
      <td id="T_da302_row1_col1" class="data row1 col1" >2</td>
      <td id="T_da302_row1_col2" class="data row1 col2" >下跌5%</td>
      <td id="T_da302_row1_col3" class="data row1 col3" >95%</td>
      <td id="T_da302_row1_col4" class="data row1 col4" >20.900</td>
      <td id="T_da302_row1_col5" class="data row1 col5" >2.00%</td>
      <td id="T_da302_row1_col6" class="data row1 col6" >3.00%</td>
      <td id="T_da302_row1_col7" class="data row1 col7" >600</td>
      <td id="T_da302_row1_col8" class="data row1 col8" >￥12540</td>
      <td id="T_da302_row1_col9" class="data row1 col9" >900</td>
      <td id="T_da302_row1_col10" class="data row1 col10" >￥19140</td>
      <td id="T_da302_row1_col11" class="data row1 col11" >21.267</td>
    </tr>
    <tr>
      <td id="T_da302_row2_col0" class="data row2 col0" >万科</td>
      <td id="T_da302_row2_col1" class="data row2 col1" >3</td>
      <td id="T_da302_row2_col2" class="data row2 col2" >下跌10%</td>
      <td id="T_da302_row2_col3" class="data row2 col3" >90%</td>
      <td id="T_da302_row2_col4" class="data row2 col4" >19.800</td>
      <td id="T_da302_row2_col5" class="data row2 col5" >3.00%</td>
      <td id="T_da302_row2_col6" class="data row2 col6" >6.00%</td>
      <td id="T_da302_row2_col7" class="data row2 col7" >1000</td>
      <td id="T_da302_row2_col8" class="data row2 col8" >￥19800</td>
      <td id="T_da302_row2_col9" class="data row2 col9" >1900</td>
      <td id="T_da302_row2_col10" class="data row2 col10" >￥38940</td>
      <td id="T_da302_row2_col11" class="data row2 col11" >20.495</td>
    </tr>
    <tr>
      <td id="T_da302_row3_col0" class="data row3 col0" >万科</td>
      <td id="T_da302_row3_col1" class="data row3 col1" >4</td>
      <td id="T_da302_row3_col2" class="data row3 col2" >下跌15%</td>
      <td id="T_da302_row3_col3" class="data row3 col3" >85%</td>
      <td id="T_da302_row3_col4" class="data row3 col4" >18.700</td>
      <td id="T_da302_row3_col5" class="data row3 col5" >4.00%</td>
      <td id="T_da302_row3_col6" class="data row3 col6" >10.00%</td>
      <td id="T_da302_row3_col7" class="data row3 col7" >1400</td>
      <td id="T_da302_row3_col8" class="data row3 col8" >￥26180</td>
      <td id="T_da302_row3_col9" class="data row3 col9" >3300</td>
      <td id="T_da302_row3_col10" class="data row3 col10" >￥65120</td>
      <td id="T_da302_row3_col11" class="data row3 col11" >19.733</td>
    </tr>
    <tr>
      <td id="T_da302_row4_col0" class="data row4 col0" >万科</td>
      <td id="T_da302_row4_col1" class="data row4 col1" >5</td>
      <td id="T_da302_row4_col2" class="data row4 col2" >下跌20%</td>
      <td id="T_da302_row4_col3" class="data row4 col3" >80%</td>
      <td id="T_da302_row4_col4" class="data row4 col4" >17.600</td>
      <td id="T_da302_row4_col5" class="data row4 col5" >5.00%</td>
      <td id="T_da302_row4_col6" class="data row4 col6" >15.00%</td>
      <td id="T_da302_row4_col7" class="data row4 col7" >1900</td>
      <td id="T_da302_row4_col8" class="data row4 col8" >￥33440</td>
      <td id="T_da302_row4_col9" class="data row4 col9" >5200</td>
      <td id="T_da302_row4_col10" class="data row4 col10" >￥98560</td>
      <td id="T_da302_row4_col11" class="data row4 col11" >18.954</td>
    </tr>
    <tr>
      <td id="T_da302_row5_col0" class="data row5 col0" >万科</td>
      <td id="T_da302_row5_col1" class="data row5 col1" >6</td>
      <td id="T_da302_row5_col2" class="data row5 col2" >下跌25%</td>
      <td id="T_da302_row5_col3" class="data row5 col3" >75%</td>
      <td id="T_da302_row5_col4" class="data row5 col4" >16.500</td>
      <td id="T_da302_row5_col5" class="data row5 col5" >5.00%</td>
      <td id="T_da302_row5_col6" class="data row5 col6" >20.00%</td>
      <td id="T_da302_row5_col7" class="data row5 col7" >2000</td>
      <td id="T_da302_row5_col8" class="data row5 col8" >￥33000</td>
      <td id="T_da302_row5_col9" class="data row5 col9" >7200</td>
      <td id="T_da302_row5_col10" class="data row5 col10" >￥131560</td>
      <td id="T_da302_row5_col11" class="data row5 col11" >18.272</td>
    </tr>
    <tr>
      <td id="T_da302_row6_col0" class="data row6 col0" >万科</td>
      <td id="T_da302_row6_col1" class="data row6 col1" >7</td>
      <td id="T_da302_row6_col2" class="data row6 col2" >下跌30%</td>
      <td id="T_da302_row6_col3" class="data row6 col3" >70%</td>
      <td id="T_da302_row6_col4" class="data row6 col4" >15.400</td>
      <td id="T_da302_row6_col5" class="data row6 col5" >5.00%</td>
      <td id="T_da302_row6_col6" class="data row6 col6" >25.00%</td>
      <td id="T_da302_row6_col7" class="data row6 col7" >2100</td>
      <td id="T_da302_row6_col8" class="data row6 col8" >￥32340</td>
      <td id="T_da302_row6_col9" class="data row6 col9" >9300</td>
      <td id="T_da302_row6_col10" class="data row6 col10" >￥163900</td>
      <td id="T_da302_row6_col11" class="data row6 col11" >17.624</td>
    </tr>
    <tr>
      <td id="T_da302_row7_col0" class="data row7 col0" >万科</td>
      <td id="T_da302_row7_col1" class="data row7 col1" >8</td>
      <td id="T_da302_row7_col2" class="data row7 col2" >下跌35%</td>
      <td id="T_da302_row7_col3" class="data row7 col3" >65%</td>
      <td id="T_da302_row7_col4" class="data row7 col4" >14.300</td>
      <td id="T_da302_row7_col5" class="data row7 col5" >5.00%</td>
      <td id="T_da302_row7_col6" class="data row7 col6" >30.00%</td>
      <td id="T_da302_row7_col7" class="data row7 col7" >2300</td>
      <td id="T_da302_row7_col8" class="data row7 col8" >￥32890</td>
      <td id="T_da302_row7_col9" class="data row7 col9" >11600</td>
      <td id="T_da302_row7_col10" class="data row7 col10" >￥196790</td>
      <td id="T_da302_row7_col11" class="data row7 col11" >16.965</td>
    </tr>
  </tbody>
</table>





```python
# 标的名称
name = '万科'

# 首次购入价格
price_init = 19

# 首次加仓比例
rate_init = 0.3

# 首次购入份额数量
shares_init = 300

data = {
    '价格系数': [1, 0.95, 0.9, 0.85, 0.8, 0.75, 0.7, 0.65],
    '加仓比例': [rate_init, 0.02, 0.03, 0.04, 0.05, 0.05, 0.05, 0.05],
}
df = plan(name, price_init, rate_init, shares_init, data)

format_dict = {'money': '￥{0:.0f}',
               '累计金额': '￥{0:.0f}',
               '价格': '{0:.3f}',
               '成本': '{0:.3f}',
               'shares': '{0:.0f}',
               '累计份额': '{0:.0f}',
               '价格系数': '{0:.0%}',
               '加仓比例': '{0:.2%}',
               '累计仓位': '{0:.2%}',
               }
df.style.hide_index().format(format_dict)

```

       价格系数  加仓比例  加仓批次  名称     价格 shares money
    0  1.00  0.30     1  万科  19.00             
    1  0.95  0.02     2  万科  18.05             
    2  0.90  0.03     3  万科  17.10             
    3  0.85  0.04     4  万科  16.15             
    4  0.80  0.05     5  万科  15.20             
    5  0.75  0.05     6  万科  14.25             
    6  0.70  0.05     7  万科  13.30             
    7  0.65  0.05     8  万科  12.35             
       价格系数  加仓比例  加仓批次  名称     价格 shares money
    0  1.00  0.30     1  万科  19.00    300      
    1  0.95  0.02     2  万科  18.05             
    2  0.90  0.03     3  万科  17.10             
    3  0.85  0.04     4  万科  16.15             
    4  0.80  0.05     5  万科  15.20             
    5  0.75  0.05     6  万科  14.25             
    6  0.70  0.05     7  万科  13.30             
    7  0.65  0.05     8  万科  12.35             





<style type="text/css">
</style>
<table id="T_0c7fa_">
  <thead>
    <tr>
      <th class="col_heading level0 col0" >名称</th>
      <th class="col_heading level0 col1" >加仓批次</th>
      <th class="col_heading level0 col2" >下跌幅度</th>
      <th class="col_heading level0 col3" >价格系数</th>
      <th class="col_heading level0 col4" >价格</th>
      <th class="col_heading level0 col5" >加仓比例</th>
      <th class="col_heading level0 col6" >累计仓位</th>
      <th class="col_heading level0 col7" >shares</th>
      <th class="col_heading level0 col8" >money</th>
      <th class="col_heading level0 col9" >累计份额</th>
      <th class="col_heading level0 col10" >累计金额</th>
      <th class="col_heading level0 col11" >成本</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="T_0c7fa_row0_col0" class="data row0 col0" >万科</td>
      <td id="T_0c7fa_row0_col1" class="data row0 col1" >1</td>
      <td id="T_0c7fa_row0_col2" class="data row0 col2" >首次</td>
      <td id="T_0c7fa_row0_col3" class="data row0 col3" >100%</td>
      <td id="T_0c7fa_row0_col4" class="data row0 col4" >19.000</td>
      <td id="T_0c7fa_row0_col5" class="data row0 col5" >30.00%</td>
      <td id="T_0c7fa_row0_col6" class="data row0 col6" >30.00%</td>
      <td id="T_0c7fa_row0_col7" class="data row0 col7" >300</td>
      <td id="T_0c7fa_row0_col8" class="data row0 col8" >￥5700</td>
      <td id="T_0c7fa_row0_col9" class="data row0 col9" >300</td>
      <td id="T_0c7fa_row0_col10" class="data row0 col10" >￥5700</td>
      <td id="T_0c7fa_row0_col11" class="data row0 col11" >19.000</td>
    </tr>
    <tr>
      <td id="T_0c7fa_row1_col0" class="data row1 col0" >万科</td>
      <td id="T_0c7fa_row1_col1" class="data row1 col1" >2</td>
      <td id="T_0c7fa_row1_col2" class="data row1 col2" >下跌5%</td>
      <td id="T_0c7fa_row1_col3" class="data row1 col3" >95%</td>
      <td id="T_0c7fa_row1_col4" class="data row1 col4" >18.050</td>
      <td id="T_0c7fa_row1_col5" class="data row1 col5" >2.00%</td>
      <td id="T_0c7fa_row1_col6" class="data row1 col6" >32.00%</td>
      <td id="T_0c7fa_row1_col7" class="data row1 col7" >0</td>
      <td id="T_0c7fa_row1_col8" class="data row1 col8" >￥0</td>
      <td id="T_0c7fa_row1_col9" class="data row1 col9" >300</td>
      <td id="T_0c7fa_row1_col10" class="data row1 col10" >￥5700</td>
      <td id="T_0c7fa_row1_col11" class="data row1 col11" >19.000</td>
    </tr>
    <tr>
      <td id="T_0c7fa_row2_col0" class="data row2 col0" >万科</td>
      <td id="T_0c7fa_row2_col1" class="data row2 col1" >3</td>
      <td id="T_0c7fa_row2_col2" class="data row2 col2" >下跌10%</td>
      <td id="T_0c7fa_row2_col3" class="data row2 col3" >90%</td>
      <td id="T_0c7fa_row2_col4" class="data row2 col4" >17.100</td>
      <td id="T_0c7fa_row2_col5" class="data row2 col5" >3.00%</td>
      <td id="T_0c7fa_row2_col6" class="data row2 col6" >35.00%</td>
      <td id="T_0c7fa_row2_col7" class="data row2 col7" >0</td>
      <td id="T_0c7fa_row2_col8" class="data row2 col8" >￥0</td>
      <td id="T_0c7fa_row2_col9" class="data row2 col9" >300</td>
      <td id="T_0c7fa_row2_col10" class="data row2 col10" >￥5700</td>
      <td id="T_0c7fa_row2_col11" class="data row2 col11" >19.000</td>
    </tr>
    <tr>
      <td id="T_0c7fa_row3_col0" class="data row3 col0" >万科</td>
      <td id="T_0c7fa_row3_col1" class="data row3 col1" >4</td>
      <td id="T_0c7fa_row3_col2" class="data row3 col2" >下跌15%</td>
      <td id="T_0c7fa_row3_col3" class="data row3 col3" >85%</td>
      <td id="T_0c7fa_row3_col4" class="data row3 col4" >16.150</td>
      <td id="T_0c7fa_row3_col5" class="data row3 col5" >4.00%</td>
      <td id="T_0c7fa_row3_col6" class="data row3 col6" >39.00%</td>
      <td id="T_0c7fa_row3_col7" class="data row3 col7" >0</td>
      <td id="T_0c7fa_row3_col8" class="data row3 col8" >￥0</td>
      <td id="T_0c7fa_row3_col9" class="data row3 col9" >300</td>
      <td id="T_0c7fa_row3_col10" class="data row3 col10" >￥5700</td>
      <td id="T_0c7fa_row3_col11" class="data row3 col11" >19.000</td>
    </tr>
    <tr>
      <td id="T_0c7fa_row4_col0" class="data row4 col0" >万科</td>
      <td id="T_0c7fa_row4_col1" class="data row4 col1" >5</td>
      <td id="T_0c7fa_row4_col2" class="data row4 col2" >下跌20%</td>
      <td id="T_0c7fa_row4_col3" class="data row4 col3" >80%</td>
      <td id="T_0c7fa_row4_col4" class="data row4 col4" >15.200</td>
      <td id="T_0c7fa_row4_col5" class="data row4 col5" >5.00%</td>
      <td id="T_0c7fa_row4_col6" class="data row4 col6" >44.00%</td>
      <td id="T_0c7fa_row4_col7" class="data row4 col7" >100</td>
      <td id="T_0c7fa_row4_col8" class="data row4 col8" >￥1520</td>
      <td id="T_0c7fa_row4_col9" class="data row4 col9" >400</td>
      <td id="T_0c7fa_row4_col10" class="data row4 col10" >￥7220</td>
      <td id="T_0c7fa_row4_col11" class="data row4 col11" >18.050</td>
    </tr>
    <tr>
      <td id="T_0c7fa_row5_col0" class="data row5 col0" >万科</td>
      <td id="T_0c7fa_row5_col1" class="data row5 col1" >6</td>
      <td id="T_0c7fa_row5_col2" class="data row5 col2" >下跌25%</td>
      <td id="T_0c7fa_row5_col3" class="data row5 col3" >75%</td>
      <td id="T_0c7fa_row5_col4" class="data row5 col4" >14.250</td>
      <td id="T_0c7fa_row5_col5" class="data row5 col5" >5.00%</td>
      <td id="T_0c7fa_row5_col6" class="data row5 col6" >49.00%</td>
      <td id="T_0c7fa_row5_col7" class="data row5 col7" >100</td>
      <td id="T_0c7fa_row5_col8" class="data row5 col8" >￥1425</td>
      <td id="T_0c7fa_row5_col9" class="data row5 col9" >500</td>
      <td id="T_0c7fa_row5_col10" class="data row5 col10" >￥8645</td>
      <td id="T_0c7fa_row5_col11" class="data row5 col11" >17.290</td>
    </tr>
    <tr>
      <td id="T_0c7fa_row6_col0" class="data row6 col0" >万科</td>
      <td id="T_0c7fa_row6_col1" class="data row6 col1" >7</td>
      <td id="T_0c7fa_row6_col2" class="data row6 col2" >下跌30%</td>
      <td id="T_0c7fa_row6_col3" class="data row6 col3" >70%</td>
      <td id="T_0c7fa_row6_col4" class="data row6 col4" >13.300</td>
      <td id="T_0c7fa_row6_col5" class="data row6 col5" >5.00%</td>
      <td id="T_0c7fa_row6_col6" class="data row6 col6" >54.00%</td>
      <td id="T_0c7fa_row6_col7" class="data row6 col7" >100</td>
      <td id="T_0c7fa_row6_col8" class="data row6 col8" >￥1330</td>
      <td id="T_0c7fa_row6_col9" class="data row6 col9" >600</td>
      <td id="T_0c7fa_row6_col10" class="data row6 col10" >￥9975</td>
      <td id="T_0c7fa_row6_col11" class="data row6 col11" >16.625</td>
    </tr>
    <tr>
      <td id="T_0c7fa_row7_col0" class="data row7 col0" >万科</td>
      <td id="T_0c7fa_row7_col1" class="data row7 col1" >8</td>
      <td id="T_0c7fa_row7_col2" class="data row7 col2" >下跌35%</td>
      <td id="T_0c7fa_row7_col3" class="data row7 col3" >65%</td>
      <td id="T_0c7fa_row7_col4" class="data row7 col4" >12.350</td>
      <td id="T_0c7fa_row7_col5" class="data row7 col5" >5.00%</td>
      <td id="T_0c7fa_row7_col6" class="data row7 col6" >59.00%</td>
      <td id="T_0c7fa_row7_col7" class="data row7 col7" >100</td>
      <td id="T_0c7fa_row7_col8" class="data row7 col8" >￥1235</td>
      <td id="T_0c7fa_row7_col9" class="data row7 col9" >700</td>
      <td id="T_0c7fa_row7_col10" class="data row7 col10" >￥11210</td>
      <td id="T_0c7fa_row7_col11" class="data row7 col11" >16.014</td>
    </tr>
  </tbody>
</table>





```python
min_price = 14
max_price = 33
price = 19
money = 100000

bili = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]
```
